<UserControl
    x:Class="SUP.Views.EndView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:converters="clr-namespace:SUP.Views.Converters"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:gif="http://wpfanimatedgif.codeplex.com"
    xmlns:local="clr-namespace:SUP.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="clr-namespace:SUP.ViewModels"
    d:DesignHeight="450"
    d:DesignWidth="800"
    mc:Ignorable="d">

    <UserControl.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
    </UserControl.Resources>


    <Grid>
        <Grid.Background>
            <ImageBrush ImageSource="/Assets/ViewDesign/background.png" />
        </Grid.Background>

        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Image
            x:Name="Confetti"
            Grid.Row="0"
            Grid.RowSpan="3"
            gif:ImageBehavior.AnimatedSource="{Binding SelectedImage}"
            gif:ImageBehavior.AutoStart="{Binding PlayConfetti}"
            gif:ImageBehavior.RepeatBehavior="1x" />

        <Image
            Grid.Row="0"
            Grid.RowSpan="3"
            MaxWidth="300"
            MaxHeight="80"
            Margin="0,5,0,0"
            HorizontalAlignment="Center"
            VerticalAlignment="Top"
            Source="/Assets/ViewDesign/memorylogo.png" />

        <StackPanel
            Grid.Row="1"
            HorizontalAlignment="Center"
            VerticalAlignment="Center"
            Orientation="Horizontal">

            <TextBlock
                FontSize="25"
                Text="{Binding EndViewMessage}"
                TextAlignment="Center" />

            <!--<TextBlock.Text>
                <MultiBinding StringFormat="Du hittade alla kort med {0} missar på {1} drag! &#x0a; Det tog {2}. &#x0a; &#x0a; Bra jobbat!">
                    <Binding FallbackValue="77" Path="Missed" />
                    <Binding FallbackValue="190" Path="Moves" />
                    <Binding FallbackValue="00:00 sekunder/minuter" Path="TimeAsText" />
                </MultiBinding>
            </TextBlock.Text>-->

        </StackPanel>

        <StackPanel
            Grid.Row="2"
            HorizontalAlignment="Center"
            Orientation="Horizontal">

            <Button
                Width="100"
                Height="40"
                Margin="5"
                Background="ForestGreen"
                Command="{Binding RestartCmd}"
                Content="Spela igen"
                FontFamily="Bahnschrift Condensed"
                FontSize="16"
                Foreground="White" />

            <Button
                Width="100"
                Height="40"
                Margin="5"
                Background="CornflowerBlue"
                Command="{Binding BackToStartCmd}"
                Content="Startmeny"
                FontFamily="Bahnschrift Condensed"
                FontSize="16"
                Foreground="White" />
            <Button
                Width="100"
                Height="40"
                Background="#FFED6464"
                Command="{Binding SaveScoreCmd}"
                Content="Spara resultat"
                FontFamily="Bahnschrift Condensed"
                FontSize="16"
                Foreground="White"
                Visibility="{Binding IsMultiplayer, Converter={StaticResource BoolToVisibilityConverter}}" />

            <Button
                Width="100"
                Height="40"
                Margin="5"
                Background="Orange"
                Command="{Binding HighScoreCmd}"
                Content="Visa topplista"
                FontFamily="Bahnschrift Condensed"
                FontSize="16"
                Foreground="White"
                Visibility="{Binding IsMultiplayer, Converter={StaticResource BoolToVisibilityConverter}}" />

            <!--
                https://github.com/XamlAnimatedGif/WpfAnimatedGif/wiki
                https://github.com/XamlAnimatedGif/WpfAnimatedGif/blob/master/WpfAnimatedGif.Demo/MainWindow.xaml
            -->

        </StackPanel>

    </Grid>
</UserControl>